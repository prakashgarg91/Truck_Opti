<!DOCTYPE html>
<html>
<head>
    <title>JavaScript Execution Test for Bulk Upload</title>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
    <h1>Bulk Upload JavaScript Test</h1>
    
    <button onclick="testBulkUpload()">Test Bulk Upload Functions</button>
    <div id="results"></div>
    
    <script>
        function testBulkUpload() {
            const results = document.getElementById('results');
            let output = '<h2>Test Results:</h2>';
            
            // Test 1: Check if Bootstrap is available
            try {
                if (typeof bootstrap !== 'undefined') {
                    output += '<p>✓ Bootstrap is available</p>';
                } else {
                    output += '<p>✗ Bootstrap is NOT available</p>';
                }
            } catch (e) {
                output += '<p>✗ Bootstrap check failed: ' + e.message + '</p>';
            }
            
            // Test 2: Check if Modal constructor works
            try {
                const testModal = new bootstrap.Modal(document.createElement('div'));
                output += '<p>✓ Bootstrap Modal constructor works</p>';
            } catch (e) {
                output += '<p>✗ Bootstrap Modal constructor failed: ' + e.message + '</p>';
            }
            
            // Test 3: Test FileReader
            try {
                const reader = new FileReader();
                output += '<p>✓ FileReader is available</p>';
            } catch (e) {
                output += '<p>✗ FileReader failed: ' + e.message + '</p>';
            }
            
            // Test 4: Test CSV parsing logic
            try {
                const csvText = "carton_name,quantity\\nTest Box,5";
                const lines = csvText.split('\\n');
                const headers = lines[0].split(',');
                output += '<p>✓ CSV parsing logic works</p>';
                output += '<p>Parsed headers: ' + headers.join(', ') + '</p>';
            } catch (e) {
                output += '<p>✗ CSV parsing failed: ' + e.message + '</p>';
            }
            
            // Test 5: Test DOM manipulation
            try {
                const testDiv = document.createElement('div');
                testDiv.innerHTML = '<select><option value="1">Test</option></select>';
                const select = testDiv.querySelector('select');
                if (select) {
                    output += '<p>✓ DOM manipulation works</p>';
                } else {
                    output += '<p>✗ DOM querySelector failed</p>';
                }
            } catch (e) {
                output += '<p>✗ DOM manipulation failed: ' + e.message + '</p>';
            }
            
            results.innerHTML = output;
        }
        
        // Auto-run test on page load
        window.onload = function() {
            testBulkUpload();
        };
    </script>
</body>
</html>